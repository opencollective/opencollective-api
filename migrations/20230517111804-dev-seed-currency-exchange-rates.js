'use strict';

/**
 * A migration to seed FX rates in non-production DBs. Data obtained from:
 *
 * ```sql
 * SELECT DISTINCT ON ("from", "to") *
 * FROM "CurrencyExchangeRates"
 * WHERE "from" IN ('USD', 'EUR', 'GBP', 'CAD', 'JPY', 'NZD')
 * AND "to" IN ('USD', 'EUR', 'GBP', 'CAD', 'JPY', 'NZD')
 * ORDER BY "from", "to", "createdAt" ASC
 * ```
 */

/** @type {import('sequelize-cli').Migration} */
module.exports = {
  async up(queryInterface) {
    if (!['production', 'test'].includes(process.env.OC_ENV)) {
      await queryInterface.sequelize.query(`
        INSERT INTO "CurrencyExchangeRates" ("from", "to", "rate", "createdAt", "updatedAt")
        VALUES
          ('CAD', 'CAD', 1.0, '2021-10-29 05:01:07.539000 +00:00', '2021-10-29 05:01:07.539000 +00:00'),
          ('CAD', 'EUR', 0.693951, '2021-10-29 05:01:07.540000 +00:00', '2021-10-29 05:01:07.540000 +00:00'),
          ('CAD', 'GBP', 0.587093, '2021-10-29 05:01:07.540000 +00:00', '2021-10-29 05:01:07.540000 +00:00'),
          ('CAD', 'JPY', 91.991467, '2021-10-29 05:01:07.540000 +00:00', '2021-10-29 05:01:07.540000 +00:00'),
          ('CAD', 'NZD', 1.127388, '2021-10-29 05:01:07.540000 +00:00', '2021-10-29 05:01:07.540000 +00:00'),
          ('CAD', 'USD', 0.809588, '2021-10-29 05:01:07.540000 +00:00', '2021-10-29 05:01:07.540000 +00:00'),
          ('EUR', 'CAD', 1.441025, '2021-10-29 05:01:07.652000 +00:00', '2021-10-29 05:01:07.652000 +00:00'),
          ('EUR', 'EUR', 1.0, '2021-10-29 05:01:07.652000 +00:00', '2021-10-29 05:01:07.652000 +00:00'),
          ('EUR', 'GBP', 0.846016, '2021-10-29 05:01:07.652000 +00:00', '2021-10-29 05:01:07.652000 +00:00'),
          ('EUR', 'JPY', 132.561991, '2021-10-29 05:01:07.653000 +00:00', '2021-10-29 05:01:07.653000 +00:00'),
          ('EUR', 'NZD', 1.624594, '2021-10-29 05:01:07.653000 +00:00', '2021-10-29 05:01:07.653000 +00:00'),
          ('EUR', 'USD', 1.166637, '2021-10-29 05:01:07.653000 +00:00', '2021-10-29 05:01:07.653000 +00:00'),
          ('GBP', 'CAD', 1.703308, '2021-10-29 05:01:07.679000 +00:00', '2021-10-29 05:01:07.679000 +00:00'),
          ('GBP', 'EUR', 1.182011, '2021-10-29 05:01:07.679000 +00:00', '2021-10-29 05:01:07.679000 +00:00'),
          ('GBP', 'GBP', 1.0, '2021-10-29 05:01:07.679000 +00:00', '2021-10-29 05:01:07.679000 +00:00'),
          ('GBP', 'JPY', 156.689763, '2021-10-29 05:01:07.679000 +00:00', '2021-10-29 05:01:07.679000 +00:00'),
          ('GBP', 'NZD', 1.920288, '2021-10-29 05:01:07.679000 +00:00', '2021-10-29 05:01:07.679000 +00:00'),
          ('GBP', 'USD', 1.378977, '2021-10-29 05:01:07.681000 +00:00', '2021-10-29 05:01:07.681000 +00:00'),
          ('JPY', 'CAD', 0.010871, '2021-10-29 05:01:07.895000 +00:00', '2021-10-29 05:01:07.895000 +00:00'),
          ('JPY', 'EUR', 0.007544, '2021-10-29 05:01:07.895000 +00:00', '2021-10-29 05:01:07.895000 +00:00'),
          ('JPY', 'GBP', 0.006382, '2021-10-29 05:01:07.895000 +00:00', '2021-10-29 05:01:07.895000 +00:00'),
          ('JPY', 'JPY', 1.0, '2021-10-29 05:01:07.895000 +00:00', '2021-10-29 05:01:07.895000 +00:00'),
          ('JPY', 'NZD', 0.012255, '2021-10-29 05:01:07.895000 +00:00', '2021-10-29 05:01:07.895000 +00:00'),
          ('JPY', 'USD', 0.008801, '2021-10-29 05:01:07.896000 +00:00', '2021-10-29 05:01:07.896000 +00:00'),
          ('NZD', 'CAD', 0.887006, '2021-10-29 05:01:08.085000 +00:00', '2021-10-29 05:01:08.085000 +00:00'),
          ('NZD', 'EUR', 0.615538, '2021-10-29 05:01:08.088000 +00:00', '2021-10-29 05:01:08.088000 +00:00'),
          ('NZD', 'GBP', 0.520755, '2021-10-29 05:01:08.088000 +00:00', '2021-10-29 05:01:08.088000 +00:00'),
          ('NZD', 'JPY', 81.597003, '2021-10-29 05:01:08.088000 +00:00', '2021-10-29 05:01:08.088000 +00:00'),
          ('NZD', 'NZD', 1.0, '2021-10-29 05:01:08.088000 +00:00', '2021-10-29 05:01:08.088000 +00:00'),
          ('NZD', 'USD', 0.71811, '2021-10-29 05:01:08.088000 +00:00', '2021-10-29 05:01:08.088000 +00:00'),
          ('USD', 'CAD', 1.25551, '2018-01-01 23:00:00.000000 +00:00', '2020-09-08 21:42:48.662237 +00:00'),
          ('USD', 'EUR', 0.832296, '2018-01-01 23:00:00.000000 +00:00', '2020-09-08 21:42:48.662237 +00:00'),
          ('USD', 'GBP', 0.74002, '2018-01-01 23:00:00.000000 +00:00', '2020-09-08 21:42:48.662237 +00:00'),
          ('USD', 'JPY', 112.779999, '2018-01-01 23:00:00.000000 +00:00', '2020-09-08 21:42:48.662237 +00:00'),
          ('USD', 'NZD', 1.410702, '2018-01-01 23:00:00.000000 +00:00', '2020-09-08 21:42:48.662237 +00:00'),
          ('USD', 'USD', 1.0, '2018-01-01 23:00:00.000000 +00:00', '2020-09-08 21:42:48.662237 +00:00')
     `);
    }
  },

  async down() {
    // We don't want to be destructive here
  },
};
